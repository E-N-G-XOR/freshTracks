!function(e,t){function n(){}function a(e,t,n){if(3===arguments.length){var r=new a(e);r.load(t,n)}else this.name=e?e:"_",this.base=o,this.charset=s}function r(e,t){if(void 0!==t){var n=a._cached[e];a.css(n,t,e)}return a._cached[e]}function i(e,t,n){if("function"!=typeof t){if(!f)return void console.warn("[Cube] dynamic loading css disabled!");a.use(e,function(r){a.css(r,t,e),n&&n(r)})}else a.use(e,t)}function c(e){var t,n,r=a._flag,i={};if(t=r[e]){for(var o=t.length-1;o>=0;o--)n=t[o](e),n!==!1&&(t.splice(o,1),o=t.length,n&&(i[n]=!0));t.length||delete r[e];for(o in i)c(o)}}var o="",s="utf-8",u=(new Date).getTime(),l=1e4,d=!1,f=!1,_=window.localStorage?window.localStorage.getItem("__cube_debug__"):!1;a.toString=function(){return"Cube:v0.1.0"},a.init=function(e){return e.base&&"/"!==e.base&&(o=e.base.replace(/\/$/,"")),e.charset&&(s=e.charset),e.version&&(u=e.version),e.debug&&(d=e.debug),e.timeout&&(l=e.timeout),e.enableCss&&(f=e.enableCss),this},a.debug=function(){if(window.localStorage){var e=localStorage.getItem("__cube_debug__");e?localStorage.removeItem("__cube_debug__"):localStorage.setItem("__cube_debug__",!0)}},a.use=function(e,t){if(!e)throw new Error("Cube.use(moduleName) moduleName is undefined!");t||(t=n),0===e.indexOf("./")?e=e.substr(1):"/"!==e[0]&&(e="/"+e);var r=new a;return r.load(e,function(n,a,r){t(r(e))}),this},a.css=function(){},a.remove=function(){},a.register=function(e,t){var n=this._cached[e];n?console.error("module already registered:",e):this._cached[e]=t},a._cached={},a._flag={},a._tree={},a.module=function(e){return this._cached[e]},a.prototype={load:function(e,t){var n=this.name,r=e;"string"==typeof r&&setTimeout(function(){a._flag[e]&&console.error("load script timeout:",e)},l),r?"string"==typeof r&&(r=[r]):r=[];var i=r.length,c=[],o=!1;if(this._load_stack={req:c,total:i,cb:t,count:0},i){for(var s,u=0;i>u;u++)s=r[u],d&&(a._tree[s]||(a._tree[s]={}),a._tree[s][n]=!0,o=this._checkCycle(s)),o||(c.push(s),this._loadScript(s));c.length||this._leafMod(t)}else this._leafMod(t)},_leafMod:function(t){var n,o={exports:{}};t&&(n=t.apply(e,[o,o.exports,r,i,"",""])),n?n.__filename=this.name:n=!0,a._cached[this.name]=n,c(this.name)},_checkCycle:function(e,t){t||(t=[e]);var n,r,i=a._tree[e];if(!i)return!1;for(var c in i){if(-1!==t.indexOf(c))return t.unshift(c),console.warn("[WARNNING]","cycle require : "+t.join(" > ")),!0;if(n=t.slice(0),n.unshift(c),r=this._checkCycle(c,n))return!0}return!1},_loadScript:function(t){function n(t){var n=s._load_stack,c=!1;if(a._cached[t]&&(n.count++,c=s.name),n.total<=n.count){var o,u={exports:{}},l=s.name,d=l.replace(/[^\/]*$/,"");n.cb&&(o=n.cb.apply(e,[u,u.exports,r,i,l,d])),o?o.__filename=s.name:o=!0,a._cached[s.name]=o}return c}var o=a._cached[t],s=this,l=a._flag;if(o)return l=n(t),void(l!==!1&&c(l));if(o===!1)return void l[t].push(n);l[t]||(l[t]=[]),l[t].push(n),a._cached[t]=!1;var d=document.getElementsByTagName("head")[0].appendChild(document.createElement("script"));d.type="text/javascript",d.async="true",d.charset=this.charset,_&&!/\.\w+\.js$/.test(t)&&(t=t.replace(/\.js$/,".source.js"));var f=[this.base,t,"?m=1&",u];d.src=f.join("")}},t=t?t:"Cube",e[t]?console.log("window."+t+' already in using, replace the last "null" param in cube.js'):e[t]=a}(window,null);