"use strict";function t(e,n){this.tilelayer=e,this.container=e._container,this._map=e._map;var s=this;e._filter=s,n=this.options=i.deepMerge(t.options,n),this.updateStyle()}var e=require("bcore/event"),i=require("bcore/utils"),n=require("./../../leaflet"),s=require("lodash");n.dmap=n.dmap||{},t.options={hueRotate:0,saturate:100,contrast:100,brightness:100,grayscale:0,opacity:1,anim:0,blur:0,sepia:0,invert:0},t=e.extend(t,{initEvents:function(){},updateOptions:function(t){t=this.options=i.deepMerge(this.options,t),this.updateStyle()},updateStyle:function(){var t=this.container,e=this.options,i=e.opacity,n="all "+e.anim+"s",r=["sepia("+e.sepia+"%)","saturate("+e.saturate+"%)","grayscale("+e.grayscale+"%)","hue-rotate("+e.hueRotate+"deg)","contrast("+e.contrast+"%)","brightness("+e.brightness+"%)","blur("+e.blur+"px)","invert("+e.invert+"%)"].join(" "),a={webkitFilter:r,filter:r,transition:n,webkitTransition:n,opacity:i},o=t.style;s.forEach(a,function(t,e){o[e]!==t&&(o[e]=t)})},cleanStyle:function(){this.options=i.deepMerge(this.options,t.options),this.updateStyle()},getStyle:function(){return this.options}}),n.dmap.Filter=t,n.dmap.filter=function(e,i){return new t(e,i)},module.exports=t;