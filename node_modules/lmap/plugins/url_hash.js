"use strict";function t(n,i){this.addTo(n),i=this.options=o.deepMerge(t.options,i)}function n(t){var n=new RegExp("[?&]"+t+"=([^&]+)","i"),i=window.location.href.match(n);return null==i||i.length<1?"":i[1]}var i=require("jquery"),o=require("bcore/utils"),e=require("./../leaflet");t.options={},t.prototype={addTo:function(t){this._map=t,this.get(),this.initEventsMap()},initEventsMap:function(){this._map.on("load",this.get.bind(this)).on("moveend",this.set.bind(this))},get:function(){var t=n("lat"),i=n("lng"),o=n("zoom");if(t&&i&&o){var e=this._map;setTimeout(function(){e.setView({lat:parseFloat(t,10),lng:parseFloat(i,10)},o,{animate:!1})})}},set:function(){var t=this._map,n=t.getZoom(),i=t.getCenter(),o="#&lat="+i.lat+"&lng="+i.lng+"&zoom="+n;window.location.href=window.location.origin+window.location.pathname+window.location.search+o}},e.dmap=e.dmap||{},e.dmap.urlHash=function(n,i){return new t(n,i)},module.exports=t;