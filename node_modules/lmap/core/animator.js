"use strict";function i(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function t(i){i=this.options=n.deepMerge(t.options,i),this.initialize(i)}var e=require("./../core/event"),n=require("./utils"),s=n.requestAnimationFrame,o=n.cancelAnimationFrame;t.options={isLoop:!1,isAutoStart:!0,isAutoDestroy:!0,tween:null,delayStart:0,delayEnd:0,lifeSpeed:.01,lifeMin:0,lifeMax:1},t=e.extend(t,i({life:null,initialize:function(){this._initEventsAnim(),this.resetVariables(),this.options.isAutoStart&&this.startAnim()},genOptions:function(){return t.prototype.options},_initEventsAnim:function(){this.options.isAutoDestroy&&this.on("end",this.destoryAnim.bind(this))},initEventsAnim:function(){},resetVariables:function(){this.life=this.life||this.options.lifeMin,this.lifeLength=this.options.lifeMax-this.options.lifeMin},startAnim:function(){var i=this.options.delayStart;return i?void setTimeout(this.restart.bind(this),i):this.restart()},loop:function(){this.isLooping&&(this._updateLife(),this.loopid=s(this.loop.bind(this)))},_updateLife:function(){this.life+=this.options.lifeSpeed;var i=this.tween?this.getTweenValue():this.life;this.emit("update",i),this.updateLife(i),this.checkIfEnd()},checkIfEnd:function(){this.life>=this.options.lifeMax&&this._onLifeEnd()},updateLife:function(){},_onLifeEnd:function(){var i=this.options.delayEnd;i?setTimeout(this._onEnd.bind(this),i):this._onEnd(),this.emit("lifeEnd")},to:function(i,t){t=t||"life","life"===t&&this.toLife(i)},toLife:function(i){void 0!==i&&null!==i&&(this.life=i)},_onEnd:function(){return this.isLoop?this.restart():(this.end(),void this.emit("end"))},end:function(){},getTweenValue:function(){return this.tween((this.life-this.options.lifeMin)/this.lifeLength)},pause:function(){this.isLooping=!1,o(this.loopid),this.loopid=null},resume:function(){this.isLooping||(this.isLooping=!0,this.loop())},reset:function(){},restart:function(){this.resetVariables(),this.life=this.options.lifeMin||0,this.resume()},destoryAnim:function(){this.pause()}},"genOptions",function(){return t.prototype.options})),module.exports=t;