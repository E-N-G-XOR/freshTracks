"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),n=require("./../leaflet"),i=require("turf"),u=require("lodash"),a=require("./../core/utils"),s=a.switchValue,f=require("./../libs/com"),l=function(f){function l(r){e(this,l);var o=t(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,r));return r=o.options=a.deepMerge(l.options,r),o.resetVariables(),o}return r(l,f),o(l,[{key:"resetVariables",value:function(){this.enable()}},{key:"geojson",value:function(e){this._geojson=e}},{key:"updateBufferGeojson",value:function(){var e=this._geojson,t=this._data,r=this.options;if(r.r&&e){var o=void 0,n=void 0,a=void 0,f=[];if(t){var l=u.sortBy(t,function(e){return-s(r.r,e)});u.forEach(l,function(t){n=s(r.r,t),o=s(r.unit,t),a=i.buffer(e,n,o),a.properties={r:n,id:n,unit:o},f.push(a)})}else{if(n=s(r.r,{}),!n)return;o=s(r.unit,{}),a=i.buffer(e,n,o,2),f=[a]}var c=this.geojsonBuffer=i.featureCollection(f);return c}}},{key:"data",value:function(e){this._data=e}},{key:"draw",value:function(){var e=this;if(this.isable){var t=this.options.style,r=this._map;this.updateBufferGeojson();var o=this.bufferLayer,i=this.geojsonBuffer;o&&r&&r.removeLayer(o),o=this.bufferLayer=n.geoJSON(i,{style:function(e){return a.parseStyle(t,e.properties)},onEachFeature:function(t,r){var o=t.properties;a.bindChildEvents(r,e,{r:o.r,data:o})}}),o.addTo(r)}}}]),l}(f);l.options={r:function(){return 1},unit:function(){return"kilometers"},style:{dashArray:"1,2",weight:1,fill:!0,fillColor:"rgba(0,200,200,0.5)",color:"rgba(255,255,255,0.8)"}},a.applyComponent(l),module.exports=l;