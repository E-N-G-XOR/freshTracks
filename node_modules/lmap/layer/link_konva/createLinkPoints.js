"use strict";var r=require("lodash");module.exports=function(h,t,a,v,o,e){for(var i=[],s=[],u=[],n=[],p=[],d=h.x,l=h.y,f=t.x,g=t.y,c=Math.abs(f-d),x=((h.x+t.x)/2,(h.y+t.y)/2-c*a,f-d),M=g-l,y=void 0,q=void 0,b=0;1>=b;b+=1/v)y=d+x*b,q=l+M*b-Math.abs(b*(1-b)*x*a),i.push([y,q]);for(var m=void 0,E=void 0,W=0;W<i.length-1;W++)m=i[W],E=i[W+1],x=E[0]-m[0],M=E[1]-m[1],c=Math.sqrt(x*x+M*M)||1e-5,y=x/c,q=M/c,s.push([y,q]);var j=void 0,k=void 0,w=void 0;u.push(-[s[0][1],s[0][0]]);for(var z=0;z<s.length-1;z++)k=s[z],w=s[z+1],x=w[0]-k[0],M=w[1]-k[1],c=Math.sqrt(x*x+M*M)||1e-5,y=x/c,q=M/c,u.push([y,q]);{var A=void 0,B=void 0,C=[],D=i.length;Math.floor(D/2)}r.forEach(i,function(r,h){if(!(h>=D-1)){var t=(1+h/D)/3;j=u[h],y=r[0],q=r[1],A=j[0]*o/2*t,B=j[1]*o/2*t,n.push([y+A,q+B]),p.push([y-A,q-B])}});var F=e.phiWeight;if(e&&D>2){var G=s[s.length-1];x=G[0],M=G[1];var H=u[u.length-1],I=H[0],J=H[1],K=i[i.length-2],L=K[0],N=K[1],O=o*F,P=(e.phi,O*I),Q=O*J,R=[L+P,N+Q];n.push(R);var S=s[s.length-1];C.push([L+S[0]*O*1.5,N+S[1]*O*1.5]),P=-O*I,Q=-O*J;var T=[L+P,N+Q];p.push(T)}return r.flatten(r.concat(n,C,p.reverse()))};